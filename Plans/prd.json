[
  {
    "id": 105,
    "feature": "App Capabilities Configuration (Connector, Embedded)",
    "description": "Verify app has correct capabilities configured in Partners dashboard.",
    "acceptance_criteria": [
      "Embedded app setting enabled",
      "shopify.app.toml reflects correct configuration",
      "App loads correctly within Shopify Admin iframe"
    ],
    "priority": "high",
    "category": "functionality",
    "status": "completed",
    "passes": true,
    "verification": {
      "embedded_setting": "shopify.app.hart-beach.toml has embedded=true",
      "toml_config": "All settings correct: application_url, redirect_urls, scopes, webhooks",
      "iframe_loading": "Frontend accessible at connections.duxly.eu with App Bridge CDN meta tag"
    }
  },
  {
    "id": 106,
    "feature": "Using Latest App Bridge from Shopify CDN",
    "description": "App must load App Bridge from Shopify's CDN (not bundled).",
    "acceptance_criteria": [
      "App Bridge loaded via cdn.shopify.com/shopifycloud/app-bridge.js",
      "No locally bundled @shopify/app-bridge in production"
    ],
    "priority": "critical",
    "category": "embedded",
    "status": "completed",
    "passes": true
  },
  {
    "id": 109,
    "feature": "App Free from Critical UI/Functional Errors",
    "description": "No errors that fully prevent review.",
    "acceptance_criteria": [
      "No JS errors breaking functionality",
      "No blank screens or infinite loading",
      "Error states handled gracefully"
    ],
    "priority": "critical",
    "category": "functionality",
    "status": "completed",
    "passes": true,
    "verification": {
      "build": "Vite build succeeds with no errors",
      "api": "Stats Lambda invoked and returns proper responses",
      "error_handling": "StatsGrid shows warning banner and '--' for failed stats",
      "loading_states": "Skeleton loading + 10s timeout on App Bridge",
      "no_blank_screens": "ConnectScreen for non-embedded, Dashboard for embedded"
    }
  },
  {
    "id": 110,
    "feature": "App Free from Partial UI/Functional Errors",
    "description": "No errors that partially prevent review.",
    "priority": "high",
    "category": "functionality",
    "status": "completed",
    "passes": true,
    "resolution": {
      "issue": "inventoryItemsCount GraphQL field does not exist in Shopify Admin API",
      "fix": "Removed inventory items stat from both backend and frontend",
      "files_changed": ["backend/functions/stats.js", "frontend/src/components/StatsGrid.jsx"],
      "deployed": {
        "lambda": "duxly-connection-StatsFunction-d7SIoegbePGJ updated",
        "frontend": "S3 bucket synced, CloudFront invalidated"
      }
    }
  },
  {
    "id": 113,
    "feature": "Must Re-install Properly",
    "description": "Handle re-installation correctly after uninstall.",
    "priority": "high",
    "category": "functionality",
    "status": "pending"
  },
  {
    "id": 120,
    "feature": "Submission Must Include Test Credentials",
    "priority": "critical",
    "category": "listing",
    "status": "pending"
  },
  {
    "id": 121,
    "feature": "App Listing Must Include All Pricing Options",
    "priority": "critical",
    "category": "listing",
    "status": "pending"
  },
  {
    "id": 122,
    "feature": "Must Have Icon Uploaded to Partner Dashboard",
    "priority": "critical",
    "category": "listing",
    "status": "pending"
  },
  {
    "id": 123,
    "feature": "Must Not Have Misleading or Inaccurate Tags",
    "priority": "high",
    "category": "listing",
    "status": "pending"
  },
  {
    "id": 124,
    "feature": "Must Not Misuse App Card Subtitle",
    "priority": "high",
    "category": "listing",
    "status": "pending"
  },
  {
    "id": 126,
    "feature": "Submission Must Include Demo Screencast",
    "priority": "critical",
    "category": "listing",
    "status": "pending"
  },
  {
    "id": 128,
    "feature": "App Name Fields Must Be Similar",
    "priority": "high",
    "category": "listing",
    "status": "pending"
  },
  {
    "id": 129,
    "feature": "Centralize All Pricing Information Under Pricing Details",
    "priority": "high",
    "category": "listing",
    "status": "pending"
  },
  {
    "id": 130,
    "feature": "Ensure App Details Are Clear and Descriptive",
    "priority": "high",
    "category": "listing",
    "status": "pending"
  },
  {
    "id": 133,
    "feature": "Must Not Use Shopify Brand in Graphics",
    "priority": "high",
    "category": "listing",
    "status": "pending"
  },
  {
    "id": 134,
    "feature": "Must State Geographic and API Requirements",
    "priority": "medium",
    "category": "listing",
    "status": "pending"
  },
  {
    "id": 140,
    "feature": "Must Have End Recipient Acknowledgement Form Signed",
    "priority": "critical",
    "category": "connector",
    "status": "pending"
  },
  {
    "id": 142,
    "feature": "Must Have Addendum Signed for International Connector",
    "priority": "high",
    "category": "connector",
    "status": "pending"
  },
  {
    "id": 143,
    "feature": "Must Indicate Available Integrations and Data Transfers",
    "priority": "high",
    "category": "connector",
    "status": "pending"
  },
  {
    "id": 200,
    "feature": "Create SSL Certificate for connections.duxly.eu",
    "description": "Request ACM certificate in us-east-1 for CloudFront.",
    "priority": "critical",
    "category": "deployment",
    "status": "completed",
    "passes": true,
    "verification": {
      "certificate_arn": "arn:aws:acm:us-east-1:287364126144:certificate/da3e1ab6-27b7-4c44-abca-5fe3f805fd5c",
      "status": "ISSUED",
      "domain": "connections.duxly.eu"
    }
  },
  {
    "id": 201,
    "feature": "Configure CloudFront Custom Domain",
    "priority": "critical",
    "category": "deployment",
    "status": "completed",
    "passes": true,
    "verification": {
      "distribution_id": "EUQ32P5FIM9SW",
      "custom_domain": "connections.duxly.eu",
      "status": "Deployed"
    }
  },
  {
    "id": 202,
    "feature": "Configure DNS for connections.duxly.eu",
    "priority": "critical",
    "category": "deployment",
    "status": "completed",
    "passes": true,
    "verification": {
      "record_type": "CNAME",
      "record_value": "d3hd7mj8z35qoh.cloudfront.net"
    }
  },
  {
    "id": 203,
    "feature": "Update Frontend Environment for Custom Domain",
    "priority": "high",
    "category": "deployment",
    "status": "completed",
    "passes": true,
    "note": "Frontend .env does not need domain updates - the app doesn't need to know its own URL"
  },
  {
    "id": 204,
    "feature": "Update Shopify App URLs",
    "priority": "critical",
    "category": "deployment",
    "status": "completed",
    "passes": true,
    "files_updated": [
      "shopify.app.hart-beach.toml",
      "admin-ui/config.js",
      "admin-ui/app.js"
    ]
  },
  {
    "id": 205,
    "feature": "Update CDK Stack for Custom Domain",
    "priority": "high",
    "category": "deployment",
    "status": "completed",
    "passes": true,
    "files_updated": [
      "infrastructure/lib/shopify-app-stack.ts"
    ],
    "lambda_updated": "duxly-connection-CallbackFunction-VAbLbFJmSWRZ (FRONTEND_URL env var)"
  },
  {
    "id": 206,
    "feature": "Verify Custom Domain Deployment",
    "priority": "critical",
    "category": "deployment",
    "status": "completed",
    "passes": true,
    "verification": {
      "https_working": true,
      "ssl_valid": true,
      "ssl_expires": "Feb 7 2027",
      "dns_resolving": true,
      "cloudfront_status": "Deployed"
    }
  },
  {
    "id": 207,
    "feature": "Invalidate CloudFront Cache After Deployment",
    "priority": "medium",
    "category": "deployment",
    "status": "completed",
    "passes": true,
    "note": "No invalidation needed - domain change is transparent to cached content"
  },
  {
    "id": 301,
    "feature": "Reinstall Hart Beach App (Missing Shop Access Token)",
    "description": "OAuth never completed for Hart Beach. Requires merchant reinstall.",
    "priority": "high",
    "category": "bug-fix",
    "status": "pending",
    "depends_on": [302]
  },
  {
    "id": 302,
    "feature": "Debug Stats API - Lambda Not Being Invoked",
    "description": "Stats Lambda not receiving requests. Browser shows 404 errors.",
    "priority": "critical",
    "category": "bug-fix",
    "status": "completed",
    "passes": true,
    "resolution": "Fixed useSessionToken hook to use window.shopify directly instead of useAppBridge(). The CDN approach requires direct access to window.shopify, not the npm package's useAppBridge hook.",
    "debug_context": {
      "api_gateway_url": "https://xehi9a6w6e.execute-api.eu-central-1.amazonaws.com/prod",
      "lambda_function": "duxly-connection-StatsFunction-d7SIoegbePGJ",
      "symptoms": ["404 errors fetching stats", "No Lambda invocations in CloudWatch"],
      "root_cause": "useAppBridge hook from @shopify/app-bridge-react doesn't work with CDN approach - window.shopify should be accessed directly"
    }
  }
]
